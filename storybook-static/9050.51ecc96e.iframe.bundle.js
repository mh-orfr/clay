"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9050],{"./packages/clay-core/src/focus-trap/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>FocusMenu,i:()=>FocusTrap});__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js");var src=__webpack_require__("./packages/clay-shared/src/index.tsx"),es2015=__webpack_require__("./node_modules/aria-hidden/dist/es2015/index.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function FocusTrap(_ref){var _ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,children=_ref.children,focusElementRef=_ref.focusElementRef,childrenRef=(0,react.useRef)(null);return(0,react.useEffect)((function(){if(active){if(null!=focusElementRef&&focusElementRef.current)return void focusElementRef.current.focus();var focusableElements=function getFocusableElements(childrenRef){return childrenRef.current?_toConsumableArray(childrenRef.current.querySelectorAll(src.FOCUSABLE_ELEMENTS.join(","))).filter((function(element){return!element.getAttribute("aria-hidden")})):null}(childrenRef);null!=focusableElements&&focusableElements.length&&focusableElements[0].focus()}}),[active]),(0,react.useEffect)((function(){if(childrenRef.current&&active)return(0,es2015.J_)()?(0,es2015.cJ)(childrenRef.current):(0,es2015.Ry)(childrenRef.current)}),[active]),(0,jsx_runtime.jsx)(src.FocusScope,{children:(0,jsx_runtime.jsxs)("div",{ref:childrenRef,style:{display:"contents"},children:[active?(0,jsx_runtime.jsx)("span",{"aria-hidden":"true","data-focus-scope-start":"true",tabIndex:-1}):null,children,active?(0,jsx_runtime.jsx)("span",{"aria-hidden":"true","data-focus-scope-end":"true",tabIndex:-1}):null]})})}FocusTrap.displayName="FocusTrap";__webpack_require__("./node_modules/core-js/modules/web.timers.js");function FocusMenu(_ref){var children=_ref.children,menuRef=_ref.menuRef,_ref$focusableElement=_ref.focusableElements,focusableElements=void 0===_ref$focusableElement?src.FOCUSABLE_ELEMENTS:_ref$focusableElement,isFocusVisible=(0,src.useInteractionFocus)().isFocusVisible;return(0,react.useEffect)((function(){isFocusVisible()&&setTimeout((function(){var list=(0,src.getFocusableList)(menuRef,focusableElements);list.length&&list[0].focus()}),10)}),[]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children})}},"./packages/clay-core/src/icon-selector/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>IconSelector});__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js");var alignPosition,src=__webpack_require__("./packages/clay-button/src/index.tsx"),clay_form_src=__webpack_require__("./packages/clay-form/src/index.tsx"),clay_icon_src=__webpack_require__("./packages/clay-icon/src/index.tsx"),clay_shared_src=__webpack_require__("./packages/clay-shared/src/index.tsx"),react=__webpack_require__("./node_modules/react/index.js"),focus_trap=__webpack_require__("./packages/clay-core/src/focus-trap/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}!function(alignPosition){alignPosition[alignPosition.bottomLeft=5]="bottomLeft",alignPosition[alignPosition.topLeft=7]="topLeft"}(alignPosition||(alignPosition={}));var defaultMessages={changeIconButton:"Change Icon",clearInput:"Clear search input",iconSelected:"Icon selected",notFound:"No items were found.",placeholder:"Search",removeIcon:"Remove icon selection",selectIcon:"Select {0} icon",selectIconButton:"Select an Icon"},fetchIcons=function(){var _ref=function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(spritemap){var iconNames,res,text,parser,document;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return iconNames=[],_context.next=3,fetch(spritemap);case 3:return res=_context.sent,_context.next=6,res.text();case 6:return text=_context.sent,parser=new DOMParser,document=parser.parseFromString(text,"image/svg+xml"),document.querySelectorAll("symbol").forEach((function(symbol){symbol.getAttribute("id")&&iconNames.push(symbol.getAttribute("id"))})),_context.abrupt("return",iconNames);case 12:case"end":return _context.stop()}}),_callee)})));return function fetchIcons(_x){return _ref.apply(this,arguments)}}();function IconSelector(_ref2){var _messages,_messages2,_messages3,_messages4,_messages5,_messages7,externalActive=_ref2.active,defaultActive=_ref2.defaultActive,defaultSelectedIcon=_ref2.defaultSelectedIcon,_ref2$direction=_ref2.direction,direction=void 0===_ref2$direction?"bottom":_ref2$direction,_ref2$messages=_ref2.messages,messages=void 0===_ref2$messages?defaultMessages:_ref2$messages,externalSelectedIcon=_ref2.selectedIcon,onIconChange=_ref2.onIconChange,onActiveChange=_ref2.onActiveChange,spritemap=_ref2.spritemap,_useState2=_slicedToArray((0,react.useState)(!1),2),isInputFocused=_useState2[0],setIsInputFocused=_useState2[1],_useState4=_slicedToArray((0,react.useState)([]),2),iconNames=_useState4[0],setIconNames=_useState4[1],menuRef=(0,react.useRef)(null),triggerRef=(0,react.useRef)(null),isFocusVisible=(0,clay_shared_src.useInteractionFocus)().isFocusVisible,inputId=(0,clay_shared_src.useId)(),overlayId=(0,clay_shared_src.useId)(),_useState6=_slicedToArray((0,react.useState)(""),2),searchTerm=_useState6[0],setSearchTerm=_useState6[1],_useControlledState2=_slicedToArray((0,clay_shared_src.useControlledState)({defaultName:"defaultActive",defaultValue:defaultActive,handleName:"onActiveChange",name:"active",onChange:onActiveChange,value:externalActive}),2),active=_useControlledState2[0],setActive=_useControlledState2[1],_useControlledState4=_slicedToArray((0,clay_shared_src.useControlledState)({defaultName:"defaultSelectedIcon",defaultValue:defaultSelectedIcon,handleName:"onIconChange",name:"selectedIcon",onChange:onIconChange,value:externalSelectedIcon}),2),selectedIcon=_useControlledState4[0],setSelectedIcon=_useControlledState4[1];(0,react.useEffect)((function(){fetchIcons(spritemap).then((function(iconNames){setIconNames(iconNames)}))}),[spritemap]);var filteredIcons=(0,react.useMemo)((function(){return iconNames?iconNames.filter((function(icon){return icon.toLowerCase().includes(searchTerm.toLowerCase())})):[]}),[iconNames,searchTerm]),onClose=(0,react.useCallback)((function(){setActive(!1),setSearchTerm("")}),[]);(0,clay_shared_src.useOverlayPosition)({alignmentByViewport:!0,alignmentPosition:"bottom"===direction?alignPosition.bottomLeft:alignPosition.topLeft,autoBestAlign:!0,isOpen:active,ref:menuRef,triggerRef},[active]),messages=Object.assign({},defaultMessages,null!==(_messages=messages)&&void 0!==_messages?_messages:{});var navigationProps=(0,clay_shared_src.useNavigation)({containerRef:menuRef,loop:!0,orientation:"vertical",typeahead:!0,visible:active}).navigationProps,content=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(src.Z,{"aria-controls":active?overlayId:void 0,"aria-expanded":active,"aria-label":null===(_messages2=messages)||void 0===_messages2?void 0:_messages2.selectIconButton,displayType:"secondary",monospaced:!!selectedIcon,onClick:function onClick(){return setActive(!active)},onKeyDown:function onKeyDown(event){switch(event.key){case clay_shared_src.Keys.Spacebar:event.preventDefault(),setActive(!active);break;case clay_shared_src.Keys.Up:case clay_shared_src.Keys.Down:event.preventDefault(),event.stopPropagation(),active||setActive(!0),navigationProps.onKeyDown(event)}},ref:triggerRef,role:"button",title:selectedIcon?null===(_messages3=messages)||void 0===_messages3?void 0:_messages3.changeIconButton:null===(_messages4=messages)||void 0===_messages4?void 0:_messages4.selectIconButton,children:selectedIcon?(0,jsx_runtime.jsx)(clay_icon_src.Z,{symbol:"change"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:null===(_messages5=messages)||void 0===_messages5?void 0:_messages5.selectIconButton})}),active&&(0,jsx_runtime.jsx)(clay_shared_src.Overlay,{isCloseOnInteractOutside:!0,isKeyboardDismiss:!0,isOpen:!0,menuRef,onClose,portalRef:menuRef,suppress:[triggerRef,menuRef],triggerRef,children:(0,jsx_runtime.jsx)("div",{className:"dropdown-menu dropdown-menu-width-sm show",id:overlayId,ref:menuRef,role:"presentation",children:(0,jsx_runtime.jsxs)(focus_trap.I,{menuRef,children:[(0,jsx_runtime.jsx)("div",{className:"dropdown-section",children:(0,jsx_runtime.jsx)(clay_form_src.jX.Group,{small:!0,children:(0,jsx_runtime.jsxs)(clay_form_src.jX.GroupItem,{className:isInputFocused?"focus":void 0,children:[(0,jsx_runtime.jsx)(clay_form_src.jX.GroupInsetItem,{before:!0,tag:"span",children:!searchTerm&&!isInputFocused&&(0,jsx_runtime.jsx)("div",{className:"input-group-inset-icon",children:(0,jsx_runtime.jsx)(clay_icon_src.Z,{symbol:"search"})})}),(0,jsx_runtime.jsx)(clay_form_src.jX,{"aria-describedby":inputId,insetAfter:!0,insetBefore:!0,onBlur:function onBlur(){return setIsInputFocused(!1)},onChange:function onChange(event){return setSearchTerm(event.target.value)},onFocus:function onFocus(){return setIsInputFocused(!0)},placeholder:defaultMessages.placeholder,type:"text",value:searchTerm}),(0,jsx_runtime.jsx)(clay_form_src.jX.GroupInsetItem,{after:!0,tag:"span",children:(0,jsx_runtime.jsx)(src.q,{"aria-label":defaultMessages.clearInput,displayType:"unstyled",monospaced:!0,onClick:function onClick(){return setSearchTerm("")},symbol:"times",title:defaultMessages.clearInput})})]})})}),filteredIcons.length>0&&(0,jsx_runtime.jsx)("ul",{className:"dropdown-section-grid list-unstyled",onKeyDown:function onKeyDown(event){if(event.key===clay_shared_src.Keys.Tab){event.preventDefault(),setActive(!1);var list=Array.from(document.querySelectorAll(clay_shared_src.FOCUSABLE_ELEMENTS.join(","))),position=list.indexOf(triggerRef.current),nextElement=list[position+1];nextElement&&nextElement.focus(),navigationProps.onKeyDown(event)}else navigationProps.onKeyDown(event)},children:filteredIcons.map((function(item){var _messages6;return(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(src.q,{"aria-label":messages?(0,clay_shared_src.sub)(null===(_messages6=messages)||void 0===_messages6?void 0:_messages6.selectIcon,[item]):"",borderless:!0,displayType:"secondary",onClick:function onClick(){!function handleIconSelection(item){setSelectedIcon(item),onClose()}(item),isFocusVisible()&&(selectedIcon?triggerRef.current.focus():setTimeout((function(){return triggerRef.current.focus()}),10))},spritemap,symbol:item,title:item})},item)}))}),(0,jsx_runtime.jsx)("div",{"aria-live":"assertive",className:"dropdown-caption",id:inputId,children:0===filteredIcons.length&&(null===(_messages7=messages)||void 0===_messages7?void 0:_messages7.notFound)})]})})})]});return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:selectedIcon?(0,jsx_runtime.jsx)("div",{className:"selected-icon-container",children:(0,jsx_runtime.jsxs)(clay_form_src.jX.Group,{children:[(0,jsx_runtime.jsx)(clay_form_src.jX.GroupItem,{prepend:!0,shrink:!0,children:(0,jsx_runtime.jsx)(clay_form_src.jX.GroupText,{className:"bg-transparent",children:(0,jsx_runtime.jsx)(clay_icon_src.Z,{symbol:selectedIcon})})}),(0,jsx_runtime.jsx)(clay_form_src.jX.GroupItem,{append:!0,children:(0,jsx_runtime.jsx)(clay_form_src.jX,{readOnly:!0,value:selectedIcon})}),(0,jsx_runtime.jsx)("div",{className:"sr-only",role:"status",children:selectedIcon+" "+defaultMessages.iconSelected}),(0,jsx_runtime.jsx)(clay_form_src.jX.GroupItem,{shrink:!0,children:content}),(0,jsx_runtime.jsx)(clay_form_src.jX.GroupItem,{shrink:!0,children:(0,jsx_runtime.jsx)(src.q,{"aria-label":defaultMessages.removeIcon,displayType:"secondary",onClick:function onClick(){return setSelectedIcon("")},symbol:"trash",title:defaultMessages.removeIcon})})]})}):content})}}}]);