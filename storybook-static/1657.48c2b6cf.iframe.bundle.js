"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1657],{"./packages/clay-tooltip/src/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{je:()=>ClayTooltipProvider,ZP:()=>clay_tooltip_src});__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js");var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["alignPosition","children","className","show"];var Tooltip=react.forwardRef((function(_ref,ref){var _ref$alignPosition=_ref.alignPosition,alignPosition=void 0===_ref$alignPosition?"bottom":_ref$alignPosition,children=_ref.children,className=_ref.className,show=_ref.show,otherProps=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,jsx_runtime.jsxs)("div",Object.assign({className:classnames_default()(className,"tooltip","clay-tooltip-"+alignPosition,{show}),role:"tooltip"},otherProps,{ref,children:[(0,jsx_runtime.jsx)("div",{className:"arrow"}),(0,jsx_runtime.jsx)("div",{className:"tooltip-inner",children})]}))}));Tooltip.displayName="ClayTooltip";__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");var src=__webpack_require__("./packages/clay-shared/src/index.tsx"),dist_web=(__webpack_require__("./node_modules/warning/warning.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/dom-align/dist-web/index.js"));function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var ALIGNMENTS_MAP={bottom:["tc","bc"],"bottom-left":["tl","bl"],"bottom-right":["tr","br"],left:["cr","cl"],right:["cl","cr"],top:["bc","tc"],"top-left":["bl","tl"],"top-right":["br","tr"]},ALIGNMENTS_INVERSE_MAP={bctc:"top",bltl:"top-left",brtr:"top-right",clcr:"right",crcl:"left",tcbc:"bottom",tlbl:"bottom-left",trbr:"bottom-right"},BOTTOM_OFFSET=[0,7],TOP_OFFSET=[0,-7],OFFSET_MAP={bctc:TOP_OFFSET,bltl:TOP_OFFSET,brtr:TOP_OFFSET,clcr:[7,0],crcl:[-7,0],tcbc:BOTTOM_OFFSET,tlbl:BOTTOM_OFFSET,trbr:BOTTOM_OFFSET},ALIGNMENTS_FORCE_MAP=Object.assign({},ALIGNMENTS_INVERSE_MAP,{bctc:"top-left",tcbc:"bottom-left"});function matches(element,selectorString){return element.matches?element.matches(selectorString):element.msMatchesSelector?element.msMatchesSelector(selectorString):!!element.webkitMatchesSelector&&element.webkitMatchesSelector(selectorString)}function useClosestTitle(props){var targetRef=(0,react.useRef)(null),titleNodeRef=(0,react.useRef)(null),saveTitle=(0,react.useCallback)((function(element){var title=element.getAttribute("title");if(title)element.setAttribute("data-restore-title",title),element.removeAttribute("title");else if("svg"===element.tagName){var titleTag=element.querySelector("title");titleTag&&(element.setAttribute("data-restore-title",titleTag.innerHTML),titleTag.remove())}var hasParentTitle=element.closest("[title]");hasParentTitle&&saveTitle(hasParentTitle)}),[]),restoreTitle=(0,react.useCallback)((function(element){var title=element.getAttribute("data-restore-title");if(title){if("svg"===element.tagName){var titleTag=document.createElement("title");titleTag.innerHTML=title,element.appendChild(titleTag)}else element.setAttribute("title",title);element.removeAttribute("data-restore-title")}var hasParentTitle=element.closest("[data-restore-title]");hasParentTitle&&restoreTitle(hasParentTitle)}),[]),onClick=(0,react.useCallback)((function(event){props.onClick(),onHide(event)}),[]),onHide=(0,react.useCallback)((function(event){var _event$relatedTarget,_props$tooltipRef$cur,_targetRef$current;if(event&&(null===(_event$relatedTarget=event.relatedTarget)||void 0===_event$relatedTarget||!_event$relatedTarget.getAttribute("title"))&&(null!==(_props$tooltipRef$cur=props.tooltipRef.current)&&void 0!==_props$tooltipRef$cur&&_props$tooltipRef$cur.contains(event.relatedTarget)||null!==(_targetRef$current=targetRef.current)&&void 0!==_targetRef$current&&_targetRef$current.contains(event.relatedTarget)))return null;props.onHide(),titleNodeRef.current&&(restoreTitle(titleNodeRef.current),titleNodeRef.current=null),targetRef.current&&(targetRef.current.removeEventListener("click",onClick),targetRef.current=null)}),[]);return{forceHide:(0,react.useCallback)((function(){props.forceHide(),titleNodeRef.current&&(restoreTitle(titleNodeRef.current),titleNodeRef.current=null),targetRef.current&&(targetRef.current.removeEventListener("click",onClick),targetRef.current=null)}),[]),getProps:(0,react.useCallback)((function(event,hideBrowserTitle){if(!targetRef.current||(props.onClick(),null!==onHide(event))){var target=event.target,node=target&&(target.hasAttribute("[title]")||target.hasAttribute("[data-title]"))?target:function closestAncestor(node,s){var element=node,ancestor=node;if(!document.documentElement.contains(element))return null;do{if(matches(ancestor,s))return ancestor;ancestor=ancestor.parentElement}while(null!==ancestor);return null}(target,"[title], [data-title]"),hasNonEmptyTitle=""!==(null==node?void 0:node.getAttribute("title"));if(node&&hasNonEmptyTitle){targetRef.current=target,target.addEventListener("click",onClick);var title=node.getAttribute("title")||node.getAttribute("data-title")||"";return titleNodeRef.current=node,hideBrowserTitle&&saveTitle(node),{align:node.getAttribute("data-tooltip-align"),delay:node.getAttribute("data-tooltip-delay"),floating:Boolean(node.getAttribute("data-tooltip-floating")),setAsHTML:!!node.getAttribute("data-title-set-as-html"),title}}}}),[]),onHide,target:targetRef,titleNode:titleNodeRef}}__webpack_require__("./node_modules/core-js/modules/web.timers.js");function useTooltipState_slicedToArray(r,e){return function useTooltipState_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function useTooltipState_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function useTooltipState_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useTooltipState_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useTooltipState_arrayLikeToArray(r,a):void 0}}(r,e)||function useTooltipState_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useTooltipState_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var TooltipProvider_excluded=["type"];function TooltipProvider_slicedToArray(r,e){return function TooltipProvider_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function TooltipProvider_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function TooltipProvider_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return TooltipProvider_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?TooltipProvider_arrayLikeToArray(r,a):void 0}}(r,e)||function TooltipProvider_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TooltipProvider_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var initialState={align:"top",floating:!1,setAsHTML:!1,title:""},TRIGGER_HIDE_EVENTS=["dragstart","mouseout","mouseup","pointerup","touchend"],TRIGGER_SHOW_EVENTS=["mouseover","mouseup","pointerdown","touchstart"],reducer=function reducer(state,_ref){var type=_ref.type,payload=function TooltipProvider_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function TooltipProvider_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,TooltipProvider_excluded);switch(type){case"update":return Object.assign({},state,payload);case"reset":return Object.assign({},state,{align:initialState.align,floating:!1});default:throw new TypeError}},ClayTooltipProvider=function ClayTooltipProvider(_ref2){var _ref2$autoAlign=_ref2.autoAlign,autoAlign=void 0===_ref2$autoAlign||_ref2$autoAlign,children=_ref2.children,_ref2$containerProps=_ref2.containerProps,containerProps=void 0===_ref2$containerProps?{}:_ref2$containerProps,_ref2$contentRenderer=_ref2.contentRenderer,contentRenderer=void 0===_ref2$contentRenderer?function(props){return props.title}:_ref2$contentRenderer,_ref2$delay=_ref2.delay,delay=void 0===_ref2$delay?600:_ref2$delay,scope=_ref2.scope,_useReducer2=TooltipProvider_slicedToArray((0,react.useReducer)(reducer,initialState),2),_useReducer2$=_useReducer2[0],align=_useReducer2$.align,floating=_useReducer2$.floating,setAsHTML=_useReducer2$.setAsHTML,_useReducer2$$title=_useReducer2$.title,title=void 0===_useReducer2$$title?"":_useReducer2$$title,dispatch=_useReducer2[1],tooltipRef=(0,react.useRef)(null),_useInteractionFocus=(0,src.useInteractionFocus)(),getInteraction=_useInteractionFocus.getInteraction,isFocusVisible=_useInteractionFocus.isFocusVisible,isHovered=(0,react.useRef)(!1),isFocused=(0,react.useRef)(!1),_useTooltipState=function useTooltipState(_ref){var _ref$delay=_ref.delay,delay=void 0===_ref$delay?600:_ref$delay,_useState2=useTooltipState_slicedToArray((0,react.useState)(!1),2),isOpen=_useState2[0],setOpen=_useState2[1],timeoutIdRef=(0,react.useRef)(),open=(0,react.useCallback)((function(immediate,customDelay){immediate?setOpen(!0):(clearTimeout(timeoutIdRef.current),timeoutIdRef.current=setTimeout((function(){setOpen(!0)}),void 0!==customDelay?customDelay:delay))}),[]);return{close:(0,react.useCallback)((function(){clearTimeout(timeoutIdRef.current),setOpen(!1)}),[]),isOpen,open}}({delay}),close=_useTooltipState.close,isOpen=_useTooltipState.isOpen,open=_useTooltipState.open,_useClosestTitle=useClosestTitle({forceHide:(0,react.useCallback)((function(){dispatch({type:"reset"}),close()}),[]),onClick:(0,react.useCallback)((function(){isFocused.current=!1,isHovered.current=!1}),[]),onHide:(0,react.useCallback)((function(){isHovered.current||isFocused.current||(dispatch({type:"reset"}),close())}),[]),tooltipRef}),forceHide=_useClosestTitle.forceHide,getProps=_useClosestTitle.getProps,onHide=_useClosestTitle.onHide,target=_useClosestTitle.target,titleNode=_useClosestTitle.titleNode;!function useAlign(_ref){var align=_ref.align,autoAlign=_ref.autoAlign,floating=_ref.floating,isOpen=_ref.isOpen,onAlign=_ref.onAlign,sourceElement=_ref.sourceElement,targetElement=_ref.targetElement,title=_ref.title,mousePosition=(0,src.useMousePosition)(20);(0,react.useEffect)((function(){if(sourceElement.current&&isOpen&&floating){var points=ALIGNMENTS_MAP[align||"top"],_mousePosition=_slicedToArray(mousePosition,2),clientX=_mousePosition[0],clientY=_mousePosition[1];(0,dist_web.zy)(sourceElement.current,{clientX,clientY},{offset:OFFSET_MAP[points.join("")],points})}}),[isOpen,floating]),(0,react.useEffect)((function(){if(targetElement.current&&sourceElement.current&&isOpen&&!floating){var points=ALIGNMENTS_MAP[align||"top"],alignment=(0,src.doAlign)({overflow:{adjustX:autoAlign,adjustY:autoAlign},points,sourceElement:sourceElement.current,targetElement:targetElement.current}),alignmentString=alignment.points.join(""),pointsString=points.join("");alignment.overflow.adjustX?onAlign(ALIGNMENTS_FORCE_MAP[alignmentString]):pointsString!==alignmentString&&onAlign(ALIGNMENTS_INVERSE_MAP[alignmentString])}}),[align,title,isOpen])}({align,autoAlign,floating,isOpen,onAlign:(0,react.useCallback)((function(align){return dispatch({align,type:"update"})}),[]),sourceElement:tooltipRef,targetElement:titleNode,title});var onShow=(0,react.useCallback)((function(event){if(isHovered.current||isFocused.current){var _ref3,_props=getProps(event,isHovered.current);if(_props)dispatch({align:null!==(_ref3=_props.align)&&void 0!==_ref3?_ref3:align,floating:_props.floating,setAsHTML:_props.setAsHTML,title:_props.title,type:"update"}),open(isFocused.current,_props.delay?Number(_props.delay):void 0)}}),[align]);(0,react.useEffect)((function(){var handleEsc=function handleEsc(event){isOpen&&event.key===src.Keys.Esc&&(event.stopImmediatePropagation(),forceHide())};return document.addEventListener("keyup",handleEsc,!0),function(){return document.removeEventListener("keyup",handleEsc,!0)}}),[isOpen]);var onHoverStart=function onHoverStart(event){"pointer"===getInteraction()?isHovered.current=!0:isHovered.current=!1,onShow(event)},onHoverEnd=function onHoverEnd(event){isFocused.current=!1,isHovered.current=!1,onHide(event)},onFocus=function onFocus(event){isFocusVisible()&&(isFocused.current=!0,onShow(event))},onBlur=function onBlur(event){isFocused.current=!1,isHovered.current=!1,onHide(event)};(0,react.useEffect)((function(){if(scope){var disposeShowEvents=TRIGGER_SHOW_EVENTS.map((function(eventName){return(0,src.delegate)(document.body,eventName,scope,onHoverStart)})),disposeHideEvents=TRIGGER_HIDE_EVENTS.map((function(eventName){return(0,src.delegate)(document.body,eventName,scope+", .tooltip",onHoverEnd)})),disposeShowFocus=(0,src.delegate)(document.body,"focus",scope+", .tooltip",onFocus,!0),disposeCloseBlur=(0,src.delegate)(document.body,"blur",scope+", .tooltip",onBlur,!0);return function(){disposeShowEvents.forEach((function(_ref4){return(0,_ref4.dispose)()})),disposeHideEvents.forEach((function(_ref5){return(0,_ref5.dispose)()})),disposeShowFocus.dispose(),disposeCloseBlur.dispose()}}}),[onShow]);var titleContent=contentRenderer({targetNode:target.current,title}),tooltip=isOpen&&(0,jsx_runtime.jsx)(src.ClayPortal,Object.assign({},containerProps,{children:(0,jsx_runtime.jsx)(Tooltip,{alignPosition:align,ref:tooltipRef,show:!0,children:setAsHTML&&"string"==typeof titleContent?(0,jsx_runtime.jsx)("span",{dangerouslySetInnerHTML:{__html:titleContent}}):titleContent})}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:scope?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tooltip,children]}):children&&react.cloneElement(children,Object.assign({},children.props,{children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children.props.children,tooltip]}),onBlur,onFocus,onMouseOut:onHoverEnd,onMouseOver:onHoverStart}))})};const clay_tooltip_src=Tooltip}}]);